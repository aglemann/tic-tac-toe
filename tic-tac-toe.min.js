function Game(G){function y(f){for(z in u){for(var l=u[z],s=x=o=h,q;s--;){q=l[s];n[q]=="x"&&x--;n[q]=="o"&&o--}if(!x)return m-f;if(!o)return f-m}}function C(f,l){a=f%h*m;b=~~(f/h)*m;c=m/2;d=m/3;e=d*2;k.lineWidth=4;k.bn();if(l)k.a(a+c,b+c,d/2,0,D.PI*2);else{k.mT(a+d,b+d);k.lT(a+e,b+e);k.mT(a+d,b+e);k.lT(a+e,b+d)}k.sk();n[f]=l||"x"}function E(f){var l=h*h,s="x",q="max",p,A,t,F;if(t=y(f))p=t;else{if(f%2){s="o";q="min"}for(;l--;)if(!n[l]){n[l]=s;t=E(f+1);n[l]=v;p=p===v?t:D[q](t,p);if(A===v||p>A){A=p;
F=l}}}return f?p||0:F}var h=3,m=100,w=document,r=w.createElement("canvas"),k=r.getContext("2d"),D=Math,B=alert,u=[],n=[],v;for(i in k)k[i[0]+(i[4]||"")]=k[i];r.height=r.width=h*m;k.strokeStyle="#666";k.bn();i=1;for(g=h-1;i<=g*2;i++){a=b=0;c=d=h*m;if(i<=g)a=c=i*m;else b=d=i*m-g*m;k.mT(a,b);k.lT(c,d)}k.sk();(G||w.body).appendChild(r);i=0;c=[];for(d=[];i<h;i++){j=0;a=[];for(b=[];j<h;j++){a.push(i*h+j);b.push(j*h+i)}u.push(a,b);c.push(i*h+i);d.push((h-i-1)*h+i)}u.push(c,d);r.onclick=function(f){var l=
r.getBoundingClientRect();f=~~((f.pageY-(l.top+w.body.scrollTop))/m)*h+~~((f.pageX-(l.left+w.body.scrollLeft))/m);if(!n[f]){C(f,"o");if(y(0)<0)return B("won");f=E(0);if(f===v)return B("tie");C(f);if(y(0)>0)return B("lost")}}};
