function Game(){function w(f){for(z in v){for(var l=v[z],q=x=o=h,n;q--;){n=l[q];p[n]=="x"&&x--;p[n]=="o"&&o--}if(!x)return m-f;if(!o)return f-m}}function B(f,l){x=f%h*m;y=~~(f/h)*m;c=m/2;d=m/3;e=d*2;k.lineWidth=4;k.bn();if(l)k.a(x+c,y+c,d/2,0,C.PI*2);else{k.mT(x+d,y+d);k.lT(x+e,y+e);k.mT(x+d,y+e);k.lT(x+e,y+d)}k.sk();p[f]=l||"x"}function D(f){var l=h*h,q="x",n="max",r,s;if(s=w(f))r=s;else{if(f%2){q="o";n="min"}for(;l--;)if(!p[l]){p[l]=q;s=D(f+1);p[l]=t;r=r===t?s:C[n](s,r)}}return r||0}var h=3,m=100,
E=document,u=E.createElement("canvas"),k=u.getContext("2d"),C=Math,A=alert,v=[],p=[],t;for(i in k)k[i[0]+(i[4]||"")]=k[i];u.height=u.width=h*m;k.strokeStyle="#666";k.bn();i=1;for(g=h-1;i<=g*2;i++){a=b=0;c=d=h*m;if(i<=g)a=c=i*m;else b=d=i*m-g*m;k.mT(a,b);k.lT(c,d)}k.sk();E.body.appendChild(u);i=0;c=[];for(d=[];i<h;i++){j=0;a=[];for(b=[];j<h;j++){a.push(i*h+j);b.push(j*h+i)}v.push(a,b);c.push(i*h+i);d.push((h-i-1)*h+i)}v.push(c,d);u.onclick=function(f){f=~~(f.pageY/m)*h+~~(f.pageX/m);var l,q,n;if(!p[f]){B(f,
"o");if(w(0)<0)return A("won");for(f=h*h;f--;)if(!p[f]){p[f]="x";n=D(1);p[f]=t;if(l===t||n>l){l=n;q=f}}if(l===t)return A("tie");B(q);if(w(0)>0)return A("lost")}}};
